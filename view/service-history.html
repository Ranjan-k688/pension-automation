<div ng-controller="serviceHistorys">
  <div class="titles ">Service History Form </div>
  <form name="serviceF" novalidate>
    <div class="formsec">
      <ul class="formshow list3">
        <li>
          <div class="form-group">
            <label class="required">Pensioner Id</label>
            <select class="form-control dropdd" data-live-search="true"
            ng-options="pensioner.pensioner_id as pensioner.pensioner_id + ' - ' + pensioner.pensioner_name for pensioner in allPensionersData"
              name="pensionerId" required ng-model="form.pensionerId"
              ng-change="payDataById(form.pensionerId); getServicedata(form.pensionerId);">
              <option value="" selected>Select Pensioner Id</option>
            </select>
          </div>
          <div class="error" ng-show="serviceF.$submitted && serviceF.pensionerId.$error.required && !formSubmitted"
            style="color: red;">
            This field is required.
          </div>
        </li>

        <li ng-if="form.employeeName">
          <div class="form-group">
            <label class="">Employee Name </label>
            <input type="text" class="form-control" placeholder="Employee name" name="employeeName"
              ng-model="form.employeeName" disabled />
          </div>
        </li>
        <li ng-if="form.payCommissionCode">
          <div class="form-group">
            <label class="">PayCommision Code</label>
            <select class="form-control" ng-model="form.payCommissionCode" name="payCommissionCode"
              ng-options="x.payCommissionCode as x.dscr for x in payCommisionData" disabled>
            </select>
          </div>
        </li>
        <li ng-if="form.aadhaar">
          <div class="form-group">
            <label class="">Aadhar No.</label>
            <input type="text" class="form-control" placeholder="Aadhar No." name="aadhaar" ng-model="form.aadhaar"
              disabled />
          </div>
        </li>
        <li ng-if="form.pensionerId">
          <div class="form-group" >
            <label class="">Pan No</label>
            <input type="text" class="form-control"  placeholder="Pan No." name="pan"  ng-model="form.pan" disabled />
          </div>
        </li>

        <li ng-if="form.pensionerStatusCode || form.pensionerStatusCode=='0' ">
          <div class="form-group">
            <label class="required">Pensioner Status code</label>
            <select class="form-control" ng-model="form.pensionerStatusCode" name="pensionerStatusCode"
              data-live-search="true" ng-options="x.pensionerStatusCode as x.dscr for x in pensionerStatusData"
              disabled>
            </select>
          </div>
        </li>
        <li ng-if="form.collegeCode">
          <div class="form-group" ng-if="form.collegeCode">
            <label class="">College</label>
            <select class="form-control" ng-model="form.collegeCode" name="collegeCode" title="Select College"
              ng-options="x.collegeShortName as x.dscr for x in clgs" disabled>
              <option value="" disabled selected>Select College</option>
            </select>
          </div>
        </li>
        <li ng-if="form.departmentCode">
          <div class="form-group" ng-if="form.departmentCode">
            <label class="">Department</label>
            <select class="form-control" ng-model="form.departmentCode" name="departmentCode" title="Select department"
              ng-options="x.deptShortName as x.dscr for x in depts" disabled>
              <option value="" disabled selected>Select Department</option>
            </select>

          </div>
        </li>
        <li>
          <div class="form-group">
            <label class="required">Date Of Appointment </label>
            <input type="text" class="datepicker form-control" datepicker name="dateOfAppointment"
              placeholder="Date Of Appointment" ng-model="form.dateOfAppointment" required ng-disabled="flag"
              ng-change="checkDuplicate(form.pensionerId,form.dateOfAppointment)" />
          </div>
          <div class="error"
            ng-show="serviceF.dateOfAppointment.$error.required && serviceF.$submitted && !formSubmitted"
            style="color: red;">
            This field is required.
          </div>
          <div class="error" ng-show="pcode"  style="color: red;">
            Date Of Appointment Should be after of DOB.
            </div>
        </li>
        <li>
          <div class="form-group">
            <label class="">Date Of Separation</label>
            <input type="text" class="datepicker form-control" datepicker placeholder="Date Of Separation"
              ng-model="form.dateOfSeparation" />
          </div>
        </li>
      </ul>
      <div> <button type="button" class="btn bluebtn" ng-click="saveServiceHistory(form)">Submit</button></div>
    </div>
    <div ng-show="showSuccess" class="success-message">Data Saved Successfully!</div>
    <div ng-show="showDelete" class="delete-message">Delete Data Successfully!</div>

  </form>

  <!-- data List -->
  <div>
    <div class="titles lists" data-aos="fade-up" data-aos-duration="1000">Data List </div>
    <!-- <div class="tabletop fcs">
                  <div><button class="btn bluebtn" data-toggle="modal"  id="exportToExcel" data-backdrop="static" data-keyboard="false"><i class="fa fa-download"></i> Download</button></div>
                 <div class="searchfield"><input class="form-control" type="text" value=""  ng-model="searchId" placeholder="Search By id" /></div> 
               </div> -->
    <div class="tablesec">
      <table class="table table-striped">
        <thead>
          <tr>
            <th width="140">Pensioner Id</th>
            <th width="120">Date Of Appointment </th>
            <th width="120">Date Of Separation</th>
            <th width="120">Action</th>
          </tr>
        </thead>

        <tbody>
          <tr ng-repeat="x in paydetialData | orderBy: '-dateOfAppointment'">
            <td>{{x.pensionerId}}</td>
            <td>{{x.dateOfAppointment}}</td>
            <td>{{x.dateOfSeparation }}</td>
            <td>
              <button class="btn editbtn" data-toggle="modal" data-placement="top" data-target="#editpensioner"
              title="Edit" ng-click="editData(x);payDataById(x.pensionerId);"><i class="fa fa-pencil"></i></button>
              <!-- <button class="btn editbtn" data-toggle="modal" data-placement="top" title="Edit"
                ng-click="editData(x); payDataById(x.pensionerId);"><i class="fa fa-pencil"></i></button> -->
              <!-- <button class="btn viewbtn" data-toggle="modal" data-placement="top" title="View"><i class="fa fa-eye"></i></button> -->
              <!-- <button class="btn deletebtn" data-toggle="modal" data-placement="top" title="Delete"><i class="fa fa-trash" ng-click="DeleteData(x.pensionerId,x.dateOfAppointment,$index)"></i></button>  -->
              <button class="btn deletebtn" data-toggle="modal" data-target="#deleteModal" data-placement="top"
                ng-click="setDeleteData(x)" title="Delete"> <i class="fa fa-trash"></i> </button>
            </td>

            <div class="modal fade" id="deleteModal" role="dialog" data-backdrop="static">
              <div class="modal-dialog modal-sm">
                <div class="modal-content">
                  <div class="modal-body">
                    <div class="formsec nobg">
                      <h4 class="modal-title text-center"> Are you sure, you want to delete this data?</h4>                     
                      </div>
                      <div class="text-center">
                        <button type="button" class="btn bluebtn " style="padding: 5px;width:70px;color: beige;" data-dismiss="modal">Cancel</button>
                        <button type="button" class="btn bluebtn" style="padding: 5px;width:70px;color: beige;"
                        ng-click="DeleteData(deleteDataModel.pensionerId,deleteDataModel.dateOfAppointment,$index)">Delete</button>
                      </div>
                  </div>                 
                </div>
              </div>
            </div>

          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <div class="modal fade" id="editpensioner" data-backdrop="static">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" ng-click="closemodal();cls();">&times;</button>
          <h4 class="modal-title text-center">Edit Service History</h4>
        </div>
        <div class="modal-body">
            <form class="formsec" name="my">
              <ul class="formshow list3">
                <li>
                  <div class="form-group">
                    <label class="required">Pensioner Id</label>
                    <select class="form-control" 
                    ng-options="pensioner.pensioner_id as pensioner.pensioner_id + ' - ' + pensioner.pensioner_name for pensioner in allPensionersData" disabled
                      name="pensionerId" required ng-model="form.pensionerId"
                      ng-change="payDataById(form.pensionerId); getServicedata(form.pensionerId);">
                      <option value="" disabled>Select Pensioner Id</option>
                    </select>
                  </div>
                  <div class="error" ng-show="my.$submitted && my.pensionerId.$error.required && !formSubmitted"
                    style="color: red;">
                    This field is required.
                  </div>
                </li>
        
                <li ng-if="form.employeeName">
                  <div class="form-group">
                    <label class="">Employee Name </label>
                    <input type="text" class="form-control" placeholder="Employee name" name="employeeName"
                      ng-model="form.employeeName" disabled />
                  </div>
                </li>
                <li ng-if="form.payCommissionCode">
                  <div class="form-group">
                    <label class="">PayCommision Code</label>
                    <select class="form-control" ng-model="form.payCommissionCode" name="payCommissionCode"
                      ng-options="x.payCommissionCode as x.dscr for x in payCommisionData" disabled>
                    </select>
                  </div>
                </li>
                <li ng-if="form.aadhaar">
                  <div class="form-group">
                    <label class="">Aadhar No.</label>
                    <input type="text" class="form-control" placeholder="Aadhar No." name="aadhaar" ng-model="form.aadhaar"
                      disabled />
                  </div>
                </li>
                <li ng-if="form.pan">
                  <div class="form-group" >
                    <label class="">Pan No</label>
                    <input type="text" class="form-control"  placeholder="Pan No." name="pan"  ng-model="form.pan" disabled />
                  </div>
                </li>
        
                <li ng-if="form.pensionerStatusCode || form.pensionerStatusCode=='0' ">
                  <div class="form-group">
                    <label class="required">Pensioner Status code</label>
                    <select class="form-control" ng-model="form.pensionerStatusCode" name="pensionerStatusCode"
                      data-live-search="true" ng-options="x.pensionerStatusCode as x.dscr for x in pensionerStatusData"
                      disabled>
                    </select>
                  </div>
                </li>
                <li ng-if="form.collegeCode">
                  <div class="form-group" ng-if="form.collegeCode">
                    <label class="">College</label>
                    <select class="form-control" ng-model="form.collegeCode" name="collegeCode" title="Select College"
                      ng-options="x.collegeShortName as x.dscr for x in clgs" disabled>
                      <option value="" disabled selected>Select College</option>
                    </select>
                  </div>
                </li>
                <li ng-if="form.departmentCode">
                  <div class="form-group" ng-if="form.departmentCode">
                    <label class="">Department</label>
                    <select class="form-control" ng-model="form.departmentCode" name="departmentCode" title="Select department"
                      ng-options="x.deptShortName as x.dscr for x in depts" disabled>
                      <option value="" disabled selected>Select Department</option>
                    </select>
        
                  </div>
                </li>
                <li>
                  <div class="form-group">
                    <label class="required">Date Of Appointment </label>
                    <input type="text" class="datepicker form-control" datepicker name="dateOfAppointment"
                      placeholder="Date Of Appointment" ng-model="form.dateOfAppointment" required ng-disabled="flag"
                       ng-change="checkDuplicate(form.pensionerId,form.dateOfAppointment)" />
                  </div>
                  <div class="error"
                    ng-show="my.dateOfAppointment.$error.required && my.$submitted && !formSubmitted"
                    style="color: red;">
                    This field is required.
                  </div>
                  <div class="error" ng-show="pcode"  style="color: red;">
                    Date Of Appointment Should be after of DOB.
                    </div>
                </li>
                <li>
                  <div class="form-group">
                    <label class="">Date Of Separation</label>
                    <input type="text" class="datepicker form-control" datepicker placeholder="Date Of Separation"
                      ng-model="form.dateOfSeparation" />
                  </div>
                  <div class="error" ng-show="pcode1"  style="color: red;">
                    Date Of Separation Should be after of DOB.
                    </div>
                </li>
              </ul>
                <div class="modal-footer text-center">
                    <div class="text-center">
                      <button type="button" class="btn bluebtn" ng-click="saveServiceHistory(form)">Update</button>
                      <button type="button" class="btn bluebtn" data-dismiss="modal" ng-click="closemodal(); cls();">Close</button>
                    </div>
                  </div> 
            </form>
           
                  </div>
               </div>
        </div>
     </div>
  
     <div class="popupbg"></div>

</div>