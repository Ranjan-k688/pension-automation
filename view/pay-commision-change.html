
<div ng-controller="payCommisionChanges"> 
  <div class="titles">PayCommission Change Form </div>  
<form  name="paycommision" novalidate> 
    <div class="formsec">    
        <ul class="formshow list3">
          <li>
            <div class="form-group">
              <label class="required">Pensioner Id </label>
              <select class="form-control dropdd" data-live-search="true" ng-options="pensioner.pensioner_id as pensioner.pensioner_id + ' - ' + pensioner.pensioner_name for pensioner in allPensionersData" name="pensionerId" required ng-model="form.pensionerId" 
              ng-change="payDataById(form.pensionerId);payDataById1(form.pensionerId)">
                <option value=""  selected >Select Pensioner Id</option>
                </select>
            </div>
            <div class="error" ng-show="paycommision.pensionerId.$error.required && paycommision.$submitted && !formSubmitted" style="color: red;">
              This field is required.
            </div>
            <div class="error" ng-show="paycommision.pensionerId.$error.maxlength"  style="color: red;">
              Only  15 characters are allowed.
          </div>
        </li>

              <li ng-if="employeeName">
                <div class="form-group" >
                  <label class="required">Employee Name </label>
                  <input type="text" class="form-control"  placeholder="Employee name" name="employeeName"  ng-model="employeeName"  disabled/>
                </div>
            </li>  
        <li ng-if="aadhaar">
          <div class="form-group" >
            <label class="required">Aadhar No.</label>
            <input type="text" class="form-control"  placeholder="Aadhar No." name="aadhaar"  ng-model="aadhaar"  disabled/>
          </div>
      </li>
      <li ng-if="pan">
        <div class="form-group" >
          <label class="">Pan No</label>
          <input type="text" class="form-control"  placeholder="Pan No." name="pan"  ng-model="pan" disabled />
        </div>
      </li>
          <li ng-if="pensionerStatusCode || pensionerStatusCode=='0' ">
            <div class="form-group">
              <label class="required">Pensioner Status code</label>
              <select class="form-control" ng-model="pensionerStatusCode" name="pensionerStatusCode"
                data-live-search="true" ng-options="x.pensionerStatusCode as x.dscr for x in pensionerStatusData"
                disabled>
              </select>
            </div>
          </li>
      <li ng-if="collegeCode">
        <div class="form-group" ng-if="collegeCode">
          <label class="required">College</label>
          <!-- <select class="form-control" ng-model="collegeCode" name="collegeCode" data-live-search="true" title="Select College" ng-options="x.collegeShortName as x.dscr for x in clgs" disabled>
           </select> -->
           <input type="text" class="form-control"  name="College"  placeholder="College" ng-model="collegeCode" disabled />

      </div>
      </li>
      <li ng-if="departmentCode">
        <div class="form-group" ng-if="departmentCode">
         <label class="required">Department</label>
         <!-- <select class="form-control" ng-model="departmentCode" name="departmentCode" data-live-search="true" title="Select department" ng-options="x.deptShortName as x.dscr for x in depts" disabled>    
        </select> -->
        <input type="text" class="form-control"  name="departmentCode"  placeholder="Department" ng-model="departmentCode" disabled/>

      </div>
      </li>
      <li ng-if="previousPayCommCode">
        <div class="form-group" >
          <label class="required">Previous Pay Commision Code</label>
          <input type="text" class="form-control"  placeholder="Previous Pay Commision Code" name="previousPayCommCode"  ng-model="previousPayCommCode"  disabled/>
        </div>
    </li>
      

            <li>
              <div class="form-group">
                <label class="required">Pay Commission Code</label>
                <select class="form-control" ng-model="form.payCommissionCode" name="payCommissionCode" required title="Select PayCommsion Change" ng-disabled="flag" >
                  <option value=""  selected>Select PayCommsion code</option>
                  <option value={{x.payCommissionCode}} ng-repeat="x in payCommisionData" >{{x.dscr}}</option>
                </select>
              </div>
              <div class="error" ng-show="paycommision.payCommissionCode.$error.required && paycommision.$submitted && !formSubmitted" style="color: red;">
                This field is required.
              </div>
          </li>
            <li>
              <div class="form-group">
                <label class="required">Date From </label>
                <input type="text" class="datepicker form-control" datepicker name="dateFrom" required placeholder="Date From" ng-model="form.dateFrom" ng-disabled="flag"
                ng-change="checkDuplicate(form.pensionerId,form.dateFrom)" />
              </div>
              <div class="error" ng-show="paycommision.dateFrom.$error.required && paycommision.$submitted && !formSubmitted" style="color: red;">
                This field is required.
              </div>
              <div class="error" ng-show="pcode"  style="color: red;">
                Date From Should be after of DOB.
                </div>
          </li> 
          <li ng-hide="true">
            <div class="form-group">
              <label class="required">EffectiveDate </label>
              <input type="text" class="datepicker form-control" datepicker name="effectiveDate"  placeholder="Effective Date" ng-model="form.effectiveDate=form.dateFrom" />
            </div>
        </li>
            <!-- <li ng-hide="true">
                <div class="form-group">
                  <label class="required">EffectiveDate </label>
                  <input type="text" class="datepicker form-control" datepicker name="effectiveDate" required placeholder="Effective Date" ng-model="form.effectiveDate" 
                ng-change="checkDuplicate1(form.pensionerId,form.effectiveDate)" />
                </div>
                <div class="error" ng-show="paycommision.effectiveDate.$error.required && paycommision.$submitted && !formSubmitted" style="color: red;">
                  This field is required.
                </div>
                <div class="error" ng-show="pcode1"  style="color: red;">
                  Effective Date Should be after of DOB.
                  </div>
            </li>   -->
  
            <li>
              <div class="form-group">
                <label class="required">Remarks </label>
                <input type="text" class="form-control" name="remarks" required placeholder="Remarks" ng-model="form.remarks" maxlength="100" ng-pattern="/^[a-zA-Z0-9 ,]*$/" />
              </div>
              <div class="error" ng-show="paycommision.remarks.$error.pattern"  style="color: red;">
                Only alphanumeric are allowed.
            </div>
          </li>        
        </ul> 
        <div> <button type="button" class="btn bluebtn" ng-disabled="paycommision.$invalid || pcode" ng-click="savePayCommision(form)">Submit</button></div>
    </div>
    <div ng-show="showSuccess" class="success-message">Data Saved Successfully!</div>
    <div ng-show="showDelete" class="delete-message">Delete Data Successfully!</div>

  </form>

     <!-- data List -->
        <div>
          <div class="titles lists" data-aos="fade-up" data-aos-duration="1000">Data List </div>   
          <!-- <div class="tabletop fcs">
                 <div><button class="btn bluebtn" data-toggle="modal" id="exportToExcel" data-backdrop="static" data-keyboard="false"><i class="fa fa-download"></i> Download</button></div>
                 <div class="searchfield"><input class="form-control" type="text" value="" placeholder="Search" ng-model="searchId" value="" placeholder="Search By Id" /></div>
               </div> -->
         <div class="tablesec">
                 <table class="table table-striped">
                   <thead>
                     <tr>
                      <th width="100">Pensioner Id</th>
                      <th width="100">Pensioner Name</th>
                      <th width="140">Pay Commission Code</th>
                      <th width="140">Aadhaar</th>
                      <th width="140">Pan No.</th>
                      <th width="140">college</th>
                       <th width="140">department</th>
                         <th width="120">Date from</th>
                        <th width="120">Date To</th>
                       <!-- <th width="120">Remarks</th> -->
                       <th width="120">Action</th>
                     </tr>
                   </thead>

                   <tbody>
                     <tr ng-repeat="x in AllpayCommision | filter:{pay_commission_code:searchId} | orderBy:['date_from.getFullYear()', 'date_from.getMonth()', 'date_from.getDate()']">
                       <td>{{x.pensioner_id}}</td>
                       <td>{{x.pensioner_name}}</td>
                       <td>{{x.pay_commission_code}}</td>
                       <td>{{x.aadhaar}}</td>
                       <td>{{x.pan}}</td>
                       <td>{{x.college}}</td>
                       <td>{{x.department}}</td>
                       <td>{{x.date_from}}</td>
                       <td>{{x.date_to}}</td>
                       <!-- <td>{{x.remarks | uppercase}}</td> -->
                       
                       <td> 
                        <button class="btn editbtn" data-toggle="modal" data-placement="top" data-target="#editpensioner"
                        title="Edit" ng-click="editData(x); payDataById(x.pensioner_id)" ng-disabled="x.updateStatus === 1"><i class="fa fa-pencil"></i></button>
                         <!-- <button class="btn editbtn" data-toggle="modal" data-placement="top" title="Edit" ng-click="editData(x); payDataById(x.pensionerId)"><i class="fa fa-pencil"></i></button> -->
                         <!-- <button class="btn viewbtn" data-toggle="modal" data-placement="top" title="View"><i class="fa fa-eye"></i></button> -->
                         <!-- <button class="btn deletebtn" data-toggle="modal" data-placement="top" title="Delete" ng-click="DeleteData(x.pensionerId,x.payCommissionCode,x.dateFrom,$index)"><i class="fa fa-trash"></i></button>  -->
                         <button class="btn deletebtn" data-toggle="modal" data-target="#deleteModal" data-placement="top" ng-click="setDeleteData(x)"
                         title="Delete" ng-disabled="x.updateStatus === 1"> <i class="fa fa-trash" ></i>  </button>
                        </td>


                  

                      <div class="modal fade" id="deleteModal" role="dialog" data-backdrop="static">
                        <div class="modal-dialog modal-sm">
                          <div class="modal-content">
                            <div class="modal-body">
                              <div class="formsec nobg">
                                <h4 class="modal-title text-center"> Are you sure, you want to delete this data?</h4>                     
                                </div>
                                <div class="text-center">
                                  <button type="button" class="btn bluebtn " style="padding: 5px;width:70px;color: beige;" data-dismiss="modal">Cancel</button>
                                  <button type="button" class="btn bluebtn" style="padding: 5px;width:70px;color: beige;"
                                  ng-click="DeleteData(deleteDataModel.pensioner_id,deleteDataModel.pay_commission_code,deleteDataModel.date_from,$index)">Delete</button>
                                </div>
                            </div>                 
                          </div>
                        </div>
                      </div>


                     </tr>                   
                   </tbody>
                 </table>
               </div>
        </div>
<!-- data list End -->
<!-- modal for edit -->
<div class="modal fade" id="editpensioner" data-backdrop="static">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" ng-click="closemodal();cls();">&times;</button>
        <h4 class="modal-title text-center">Edit Pay Commission Change</h4>
      </div>
      <div class="modal-body">
          <form class="formsec" name="myform">
            <ul class="formshow list3">
              <li>
                <div class="form-group">
                  <label class="required">Pensioner Id </label>
                  <select class="form-control" ng-options="pensioner.pensioner_id as pensioner.pensioner_id + ' - ' + pensioner.pensioner_name for pensioner in allPensionersData" name="pensionerId" required ng-model="form.pensionerId" ng-disabled="flag" 
                  ng-change="payDataById(form.pensionerId);chkPayDetail(form.pensionerId);">
                    <option value=""  selected>Select Pensioner Id</option>
                    </select>
                </div>
                <div class="error" ng-show="paycommision.pensionerId.$error.required && paycommision.$submitted && !formSubmitted" style="color: red;">
                  This field is required.
                </div>
                <div class="error" ng-show="paycommision.pensionerId.$error.maxlength"  style="color: red;">
                  Only  15 characters are allowed.
              </div>
            </li>
    
            <li ng-if="employeeName">
              <div class="form-group" >
                <label class="required">Employee Name </label>
                <input type="text" class="form-control"  placeholder="Employee name" name="employeeName"  ng-model="employeeName"  disabled/>
              </div>
          </li>  
      <li ng-if="aadhaar">
        <div class="form-group" >
          <label class="required">Aadhar No.</label>
          <input type="text" class="form-control"  placeholder="Aadhar No." name="aadhaar"  ng-model="aadhaar"  disabled/>
        </div>
    </li>
    <li ng-if="pan">
      <div class="form-group" >
        <label class="">Pan No</label>
        <input type="text" class="form-control"  placeholder="Pan No." name="pan"  ng-model="pan" disabled />
      </div>
    </li>
        <li ng-if="pensionerStatusCode || pensionerStatusCode=='0' ">
          <div class="form-group">
            <label class="required">Pensioner Status code</label>
            <select class="form-control" ng-model="pensionerStatusCode" name="pensionerStatusCode"
              data-live-search="true" ng-options="x.pensionerStatusCode as x.dscr for x in pensionerStatusData"
              disabled>
            </select>
          </div>
        </li>
    <li ng-if="collegeCode">
      <div class="form-group" ng-if="collegeCode">
        <label class="required">College</label>
        <!-- <select class="form-control" ng-model="collegeCode" name="collegeCode" data-live-search="true" title="Select College" ng-options="x.collegeShortName as x.dscr for x in clgs" disabled>
         </select> -->
         <input type="text" class="form-control"  name="College"  placeholder="College" ng-model="collegeCode" disabled />

    </div>
    </li>
    <li ng-if="departmentCode">
      <div class="form-group" ng-if="departmentCode">
       <label class="required">Department</label>
       <!-- <select class="form-control" ng-model="departmentCode" name="departmentCode" data-live-search="true" title="Select department" ng-options="x.deptShortName as x.dscr for x in depts" disabled>    
      </select> -->
      <input type="text" class="form-control"  name="departmentCode"  placeholder="Department" ng-model="departmentCode" disabled/>

    </div>
    </li>
    <li ng-if="previousPayCommCode">
      <div class="form-group" >
        <label class="required">Previous Pay Commision Code</label>
        <input type="text" class="form-control"  placeholder="Previous Pay Commision Code" name="previousPayCommCode"  ng-model="previousPayCommCode"  disabled/>
      </div>
  </li>
    
                <li>
                    <div class="form-group">
                      <label class="required">Pay Commission Code</label>
                      <select class="form-control" ng-model="form.payCommissionCode" name="payCommissionCode" required title="Select PayCommsion Change" ng-options="x.payCommissionCode as x.dscr for x in payCommisionData"  >
                        <option value=""  selected>Select PayCommsion code</option>
                      </select>
                    </div>
                    <div class="error" ng-show="paycommision.payCommissionCode.$error.required && paycommision.$submitted && !formSubmitted" style="color: red;">
                      This field is required.
                    </div>
                </li>
                <li>
                  <div class="form-group">
                    <label class="required">Date From </label>
                    <input type="text" class="datepicker form-control" datepicker name="dateFrom" required placeholder="dateFrom" ng-model="form.dateFrom"/>
                  </div>
                  <div class="error" ng-show="paycommision.dateFrom.$error.required && paycommision.$submitted && !formSubmitted" style="color: red;">
                    This field is required.
                  </div>
              </li>  
                <li>
                  <div class="form-group">
                    <label class="required">Remarks </label>
                    <input type="text" class="form-control" name="remarks" required placeholder="remarks" ng-model="form.remarks" maxlength="200"  />
                  </div>
              </li>        
            </ul>
              <div class="modal-footer text-center">
                  <div class="text-center">
                    <button type="button" class="btn bluebtn" ng-click="savePayCommision(form)">Update</button>
                    <button type="button" class="btn bluebtn" data-dismiss="modal" ng-click="closemodal(); cls();">Close</button>
                  </div>
                </div> 
          </form>
         
                </div>
             </div>
      </div>
   </div>

     </div>
     <div class="popupbg"></div>
 