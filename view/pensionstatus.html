<div ng-controller="pensionstatus">
  <div class="titles">Pension Status Form</div>
  <form name="penform" class="formsec" novalidate>
    <ul class="formshow list3">
      <li>
        <div class="form-group">
          <label class="required">Pensioner Id </label>
          <select class="form-control dropdd" data-live-search="true"
           ng-options="pensioner.pensioner_id as pensioner.pensioner_id + ' - ' + pensioner.pensioner_name for pensioner in allPensionersData"
            name="pensionerId" required ng-model="form.pensionerId" ng-disabled="flag"
            ng-change="payDataById(form.pensionerId)">
            <option value="">Select Pensioner Id</option>
          </select>
        </div>
        <div class="error"
          ng-show="paydetail.pensionerId.$error.required && paydetail.pensionerId.$touched && !formSubmitted"
          style="color: red;">
          This field is required.
        </div>
        <div class="error" ng-show="paydetail.pensionerId.$error.maxlength" style="color: red;">
          Only 15 characters are allowed.
        </div>
      </li>
      <li ng-if="form.employeeName">
        <div class="form-group">
          <label class="required">Employee Name </label>
          <input type="text" class="form-control" placeholder="Employee name" name="employeeName"
            ng-model="form.employeeName" disabled />
        </div>
      </li>
      <li ng-if="form.payCommissionCode">
        <div class="form-group">
          <label class="required">PayCommision Code</label>
          <input type="text" class="form-control" placeholder="PayCommision Code" name="payCommissionCode"
            ng-model="form.payCommissionCode" disabled />
        </div>
      </li>
      <li ng-if="form.ppoNo">
        <div class="form-group">
          <label class="required">PPO No.</label>
          <input type="text" class="form-control" placeholder="PPo No." name="ppoNo" ng-model="form.ppoNo" disabled />
        </div>
      </li>
      <li ng-if="form.aadhaar">
        <div class="form-group">
          <label class="required">Aadhar No.</label>
          <input type="text" class="form-control" placeholder="Aadhar No." name="aadhaar" ng-model="form.aadhaar"
            disabled />
        </div>
      </li>
      <li ng-if="form.pensionerId">
        <div class="form-group">
          <label class="required">Pan No.</label>
          <input type="text" class="form-control" placeholder="Pan No." name="pan" ng-model="form.pan" disabled />
        </div>
      </li>
      <li ng-if="form.pensionerStatusCode">
        <div class="form-group">
          <label class="required">Pensioner Status code</label>
          <input type="text" class="form-control" placeholder="Pensioner Status Code" name="pensionerStatusCode"
            ng-model="form.pensionerStatusCode" disabled />
        </div>
      </li>
      <li ng-if="form.collegeCode">
        <div class="form-group" ng-if="form.collegeCode">
          <label class="required">College</label>
          <!-- <input type="text" class="form-control"  placeholder="College" name="collegeCode"  ng-model="form.collegeCode"  /> -->
          <select class="form-control" ng-model="form.collegeCode" name="collegeCode" data-live-search="true"
            title="Select College" ng-options="x.collegeShortName as x.dscr for x in clgs" disabled>
            <option value="" disabled selected>Select College</option>
          </select>

        </div>
      </li>
      <li ng-if="form.departmentCode">
        <div class="form-group" ng-if="form.departmentCode">
          <label class="required">Department</label>
          <!-- <input type="text" class="form-control"  placeholder="Department" name="departmentCode"  ng-model="form.depDscr"  /> -->
          <select class="form-control" ng-model="form.departmentCode" name="departmentCode" data-live-search="true"
            title="Select department" ng-options="x.deptShortName as x.dscr for x in depts" disabled>
            <option value="" disabled selected>Select College</option>
          </select>

        </div>
      </li>

      <li class="col-6">
        <div class="form-group">
          <label class="required">Date From</label>
          <input type="text" class="form-control datepicker" datepicker ng-model="form.dateFrom" name="dateFrom"
            placeholder="Date From" required />
          <div style="color: red;"
            ng-show="penform.dateFrom.$error.required && penform.dateFrom.$touched && !formSubmitted">
            <span ng-show="penform.dateFrom.$error.required">This field is required.</span>
          </div>
        </div>
      </li>

      <li>
        <div class="form-group">
          <label class="required">Stopped Percentage</label>
          <input type="text" class="form-control" maxlength="3" ng-model="form.stoppedPercentage" ng-pattern="/^\d+$/"
            name="stoppedPercentage" placeholder="Stopped Percentage" required />
        </div>
        <div class="error" style="color: red;"
          ng-show="penform.stoppedPercentage.$error.required  && penform.stoppedPercentage.$touched && !formSubmitted">
          This field is required.</div>
        <div class="error" style="color: red;" ng-show="penform.stoppedPercentage.$error.pattern">Number Only</div>
      </li>
      <li style="margin-top:20px"><button type="submit" class="btn bluebtn" ng-click="savePensionStatus(form)"
          ng-disabled="penform.$invalid">Submit</button></li>
    </ul>

  </form>

  <table class="table table-striped">
    <div class="titles" data-aos="fade-up" style="text-align: center;" data-aos-duration="1000">Data List</div>
    <thead>
      <tr>
        <th>Pensioner Id</th>
        <th>Date Form</th>
        <th>Date To </th>
        <th>Stopped Percentage </th>
        <th>Actions</th>
      </tr>
    </thead>

    <tbody>
      <tr ng-repeat="n in pensionStatusData">
        <!-- <td><img src="images/users.jpg" alt="img" height="26" class="rounded" /></td> -->
        <td>{{n.pensionerId}}</td>
        <td>{{n.dateFrom}}</td>
        <td>{{n.dateTo}}</td>
        <td>{{n.stoppedPercentage}}</td>
        <td>
          <button class="btn  editbtn" type="button" data-toggle="modal" data-placement="top"
                            data-target="#editpensioner" title="Edit" ng-click="edit(n); ">
            <i class="fa fa-pencil"></i></button>
       

          <button class="btn deletebtn" data-toggle="modal" data-target="#deleteModal" data-placement="top"
            ng-click="setDeleteData(n)" title="Delete"> <i class="fa fa-trash"></i>
          </button>
        </td>
      </tr>

    </tbody>
  </table>

<!-- Delete Modal -->
<div class="modal fade" id="deleteModal" role="dialog" data-backdrop="static">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-body">
        <div class="formsec nobg">
          <h4 class="modal-title text-center"> Are you sure, you want to delete this data?
          </h4>
        </div>
        <div class="text-center">
          <button type="button" class="btn bluebtn " style="padding: 5px;width:70px;color: beige;"
            data-dismiss="modal">Cancel</button>
          <button type="button" class="btn bluebtn" style="padding: 5px;width:70px;color: beige;"
            ng-click="deleteData(deleteDataInfo.pensionerId,deleteDataInfo.dateFrom)">Delete</button>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- modal for edit -->
<div  class="modal fade" id="editpensioner" data-backdrop="static">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" ng-click="closemodal();cls();">&times;</button>
        <h4 class="modal-title text-center">Edit Age Vs Basic</h4>
      </div>
      <div class="modal-body">
        <form class="formsec" name="uform">
          <ul class="formshow list3">
            <li>
              <div class="form-group">
                <label class="required">Pensioner Id</label>
                <input type="text" class="form-control" placeholder="Pensioner Id"
                  ng-model="uForm.pensionerId" name="pensioner_id" ng-disabled="isIdDisable" />
              </div>
            </li>

            <li>
              <div class="form-group">
                <label class="required">Date From</label>
                <input type="text" class="form-control datepicker" datepicker placeholder="Date From"
                  ng-model="uForm.dateFrom" name="dateFrom" required ng-disabled="isIdDisable" />

              </div>
            </li>
            <li>
              <div class="form-group">
                <label class="required">Stopped Percentage</label>
                <input type="text" class="form-control" placeholder="Stopped Percentage" ng-pattern="/^[0-9.]*$/"
                  maxlength="5" ng-model="uForm.stoppedPercentage" name="ustoppedPercentage" />
              </div>
              <div style="color: red;"
                ng-show="uform.ustoppedPercentage.$error.required && uform.ustoppedPercentage.$touched && !formSubmitted">
                This field is required.
              </div>
              <div style="color: red;"
                ng-show="uform.ustoppedPercentage.$error.pattern && uform.ustoppedPercentage.$touched && !formSubmitted">
                Please enter a valid number.
              </div>
            </li>
          </ul>
          <div class="modal-footer text-center">
            <div class="text-center">
              <button type="button" class="btn bluebtn"  ng-click="savePensionStatus(uForm)">Update</button>
              <button type="button" class="btn bluebtn" data-dismiss="modal"
                ng-click="closemodal(); cls();">Close</button>
            </div>
          </div>
        </form>

      </div>
    </div>
  </div>
</div>

</div>